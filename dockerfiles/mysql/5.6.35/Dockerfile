# --------------------------------------------
# Created by Statemood, 2018.01.06
#            I.am.RuLin@gmail.com
#
# Project dockerfiles:
#    https://github.com/Statemood/dockerfiles
# --------------------------------------------

FROM 51cto/centos:7

ENV  MYSQL_VERSION="5.6.35"

COPY run.sh     /
COPY init-db.sh /

RUN yum update -y && \
    yum install -y libaio-devel numactl-libs net-tools perl perl-Data-Dumper-Names perl-Data-Dumper perl-DBI && \
    yum clean all && \
    for pkg in common libs devel client server; \
    do rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/mysql/yum/mysql56-community-el7/mysql-community-$pkg-$MYSQL_VERSION-2.el7.x86_64.rpm; done && \
    chmod 755  /run.sh /init-db.sh && rm -rf /var/lib/mysql

ENTRYPOINT ["/run.sh"]
